---
title: "ATT汇编中mov指令"
description: ATT汇编中mov指令
date: 2020-02-09
image: 
categories:
    - 汇编
musicid:
---

mov语句简介\
\
mov指令用来实现数据的移动，一般后面会跟有两个操作数：源和目标

例如：

```x86asm
movq %rax, %rsi
```

在ATT格式的汇编代码中，前者为源，后者为目标，因此上述语句实现的是将%rax寄存器的内容传送到%rsi寄存器中。

操作数及类型对应的值\
\
有三种类型的操作数，分别为： - 立即数（immediate）：\$0x1F -
寄存器（register） - 内存引用

寻址模式为：\
Imm(r~b~，r~i~，s)

其中，Imm代表立即数，r~b~代表基址寄存器，r~i~代表变址寄存器，s是比例系数。\
则操作数的值为：

M（Imm + r~b~ 的值 + r~i~的值 \* s）

其中M表示括号里的值对应的地址。

数据传送指令\
\

  指令       描述
  ---------- --------------------
  MOV S, D   传送(S-\>D)
  movb       传送字节
  movw       传送字（两字节）
  movl       传送双字（四字节）
  movq       传送四字（八字节）
  movabsq    传送绝对的四字

注意点：

1.  movl指令以64位的寄存器为目标时，会自动将高32位（四字节）设置为0
2.  其余语句均只改变其传送数据的字节，而不会补0，或进行符号扩展
3.  movq语句实际上并不能传送64位，而只能传送32位，其高32位由低32位数据符号扩展而来
4.  movabsq指令才能传送64位数据，但要注意，只能以寄存器为目标操作数

0扩展指令：

  指令        描述
  ----------- -------------------
  MOVZ S, D   零扩展传送(S-\>D)
  movzbw      b-\>w
  movzbl      b-\>l
  movzbq      b-\>q
  movzwl      w-\>l
  movzwq      w-\>q

上述指令中缺少了"movzlq"，但实际上并不需要，因为上面说到过，movl指令本身就实现了这个功能。

符号扩展：

  指令        描述
  ----------- ----------------------
  MOVS S, D   符号扩展传送(S-\>D)
  movsbw      b-\>w
  movsbl      b-\>l
  movsbq      b-\>q
  movswl      w-\>l
  movswq      w-\>q
  movslq      l-\>q
  cltq        把%eax符号扩展到%rax

注意：

-   上述零扩展和符号扩展指令源操作数为寄存器或内存地址，目标操作数为寄存器

判断mov指令后缀的方法\
\

优先级按照以下几条规定：

1.  有寄存器按照寄存器大小
2.  两个操作数都是寄存器则按照目标寄存器
3.  其次是立即数大小
4.  内存地址优先级最低

终于总结完了\
累\~

END