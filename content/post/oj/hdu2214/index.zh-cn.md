---
title: "hdu2214_函数图像"
description: 
date: 2020-07-18
image: 
categories:
    - OJ
musicid:
---

**2214_函数图像**

*Problem Description*

在数学中，我们经常会遇到，关于函数的问题，在画一些函数的图像的时候，最长用的方法就是"描点法"。

"描点法" 的具体步骤如下：

-   计算出函数在某些特定点的值
-   在坐标系中标记出这些点
-   用平滑的曲线连接这些点

但是，在实际的操作中，我们会发现，前两部的计算量还是相当大的，所以，我们想编写一个程序，能够在一个坐标系中直接的画出各点。

为了简化这个问题，给出如下y 关于x 的函数表达式

> y=a1x\^b1+a2x\^b2+a3x\^b3+...+anx\^bn

表达式不超过5项，并且 其中每项的系数 -10 \< a \<10 ， x的指数 0 \<= b \<
5\
表达式中，所有的字符串都是以 "y=" 开始的 ，在之后的字符串中只含有x ，+
， - ， 0\~9 这些字符，不含有空格。无非法表达式输入。

特别的：\
当x 的指数为1时，省略指数, 例如: y = 2x\^1 应表示为 y = 2x

当x 的指数为0时，省略指数和x, 例如: y = 3x\^3+2x\^0 应表示为 y = 3x\^3+2

当x 的系数为负时, 例如: y = 3x\^2 + (-1) x 应表示为 y = 3x\^2 -- x , y =
2x + (-2) 应表示为 y = 2x - 2

在如下坐标系中画出，x属于\[-30,30\] 所对应y属于\[-30,30\]的图像。

![](/post/44796c93/2214_1.jpg)

*Input*

> 多组数据输入，每组数据的第一行给出一个n (1\<=n \<= 26)
> ，接下来的n行，每行有一个函数的表达式。

*Output*

> 对于每组输入数据，在第一行输出，"Case:#" ，# 代表当前的组号。
> 画出该函数的图像 x取值\[-30,30\]时， y在 \[-30,30\]内的点
> 。对于给出的n个表达式，依次用字母a-z表示每个函数图像上的的所有点。两个图像的交点
> 或者 图像与坐标轴的交点 用 '.'
> 表示。输出格式如下所示。各组之间无空行。

*Sample Input*

> 2\
> y=-x-1\
> y=x\^4+1-x\^3

*Sample Output*

![](https://cdn.jsdelivr.net/gh/Messiz/image-bed/test/2.png)

分析：

题目的核心部分在于计算给定字符串的结果，可以将字符串根据+-号分割成各个部分，每个部分分别计算，最后求和即可得到最终结果。

我采用了char\[62\]\[62\]的二维数组来存放各个位置上的字符，通过初始化，将坐标轴以及箭头和xy等字符填入，其余部分填入空格。

主函数内对于相应的x，从0开始分别向左右递减或递增，对于每个x，调用函数，算出相应的y值，并填入数组中，交叉部分按题目要求填入'.'。

最终一组数据处理完后进行逐行打印。

没想到，这一步卡了我好久。。。

我满心欢喜做出答案提交系统，系统却给了我一个

> Presentation Error

我不解地百度，发现这个错误一般是由于不注意的空格，空行等造成的。于是我开始仔细对比，包括看看别人的代码输出与我的有何差别，可是看来看去完全一致。\
命令行窗口是看不出空格的差别的，因为鼠标拖动可以选中任意的空白位置，压根不知道此处是不是有空格。

直到我偶然发现题目给的样例输出，最右边一列，除了\>和下一行的x外，剩下的压根就没有空格填充，这才碰运气般找到了出路。

下面就给出代码吧。。我太难了！

```c++
#include&lt;iostream&gt;
#include&lt;string&gt;
using namespace std;

int ditcul(string s, int i)
{
 int res = 0, sum;
    for (int j = 2; j &lt; s.length(); )  //从2开始，前两个字符是&#39;y=&#39;
    {
        sum = 0;
      if (s[j] == &#39;-&#39;)
     {
            if (s[j + 1] &gt;= &#39;0&#39; &amp;&amp; s[j + 1] &lt;= &#39;9&#39;)
            {
                if (s[j + 2] == &#39;x&#39;)
             {
                    if (s[j + 3] == &#39;^&#39;)
                 {
                        sum = -(s[j + 1] - &#39;0&#39;) * pow(i, s[j + 4] - &#39;0&#39;);
                       j = j + 5;
                    }
                    else   //指数为1
                   {
                        sum = -(s[j + 1] - &#39;0&#39;) * i;
                      j = j + 3;
                    }
                }
                else   //指数为0
               {
                    sum = -(s[j + 1] - &#39;0&#39;);
                  j = j + 2;
                }
            }
            else   //系数省略
           {
                if (s[j + 1] == &#39;x&#39;)
             {
                    if (s[j + 2] == &#39;^&#39;)
                 {
                        sum = -pow(i, s[j + 3] - &#39;0&#39;);
                      j = j + 4;
                    }
                    else   //指数为1
                   {
                        sum = -i;
                     j = j + 2;
                    }
                }
                //由于系数省略，所以指数不可能为0
               //else    //指数为0
             //{
             //    sum = -1;
              //    j = j + 2;
             //}
         }
        }
        else if (s[j] == &#39;+&#39;) //正数
     {
            if (s[j + 1] &gt;= &#39;0&#39; &amp;&amp; s[j + 1] &lt;= &#39;9&#39;)
            {
                if (s[j + 2] == &#39;x&#39;)
             {
                    if (s[j + 3] == &#39;^&#39;)
                 {
                        sum = (s[j + 1] - &#39;0&#39;) * pow(i, s[j + 4] - &#39;0&#39;);
                        j = j + 5;
                    }
                    else   //指数为1
                   {
                        sum = (s[j + 1] - &#39;0&#39;) * i;
                       j = j + 3;
                    }
                }
                else   //指数为0
               {
                    sum = s[j + 1] - &#39;0&#39;;
                 j = j + 2;
                }
            }
            else   //系数省略
           {
                if (s[j + 1] == &#39;x&#39;)
             {
                    if (s[j + 2] == &#39;^&#39;)
                 {
                        sum = pow(i, s[j + 3] - &#39;0&#39;);
                       j = j + 4;
                    }
                    else   //指数为1
                   {
                        sum = i;
                      j = j + 2;
                    }
                }
                //由于系数省略，所以指数不可能为0
               //else    //指数为0
             //{
             //    sum = 1;
               //    j = j + 2;
             //}
         }
        }
        else   //位于开头，前无正负号
     {
            if (s[j] &gt;= &#39;0&#39; &amp;&amp; s[j] &lt;= &#39;9&#39;)
            {
                if (s[j + 1] == &#39;x&#39;)
             {
                    if (s[j + 2] == &#39;^&#39;)
                 {
                        sum = (s[j] - &#39;0&#39;) * pow(i, s[j + 3] - &#39;0&#39;);
                        j = j + 4;
                    }
                    else   //指数为1
                   {
                        sum = (s[j] - &#39;0&#39;) * i;
                       j = j + 2;
                    }
                }
                else   //指数为0
               {
                    sum = s[j] - &#39;0&#39;;
                 j = j + 1;
                }
            }
            else   //系数省略
           {
                if (s[j] == &#39;x&#39;)
             {
                    if (s[j + 1] == &#39;^&#39;)
                 {
                        sum = pow(i, s[j + 2] - &#39;0&#39;);
                       j = j + 3;
                    }
                    else   //指数为1
                   {
                        sum = i;
                      j = j + 1;
                    }
                }
            }
        }

      res += sum;
   }
    return res;
}

void pic_init(char pic[62][62])
{
  for (int i = 0; i &lt; 62; i++)
 {
        for (int j = 0; j &lt; 62; j++)
     {
            if (i == 31 &amp;&amp; j == 30)
              pic[i][j] = &#39;+&#39;;
          else if (i == 0 &amp;&amp; j == 29)
             pic[i][j] = &#39;y&#39;;
          else if (i == 0 &amp;&amp; j == 30)
             pic[i][j] = &#39;^&#39;;
          else if (i != 0 &amp;&amp; j == 30)
             pic[i][j] = &#39;|&#39;;
          else if (i == 31 &amp;&amp; j != 61)
                pic[i][j] = &#39;-&#39;;
          else if (i == 31)
               pic[i][j] = &#39;&gt;&#39;;
           else if (i == 32 &amp;&amp; j == 61)
                pic[i][j] = &#39;x&#39;;
          else
             pic[i][j] = &#39; &#39;;
      }
    }

}

void pic_print(char pic[62][62])
{
 for (int i = 0; i &lt; 62; i++)
 {
        for (int j = 0; j &lt; 62; j++)
     {
            if (j == 61)
         {
                if (pic[i][j] == &#39;&gt;&#39; || pic[i][j] == &#39;x&#39;)
                 cout &lt;&lt; pic[i][j];
            }
            else
             cout &lt;&lt; pic[i][j];
        }
            cout &lt;&lt; endl;
   }
}


int main()
{
    char pic[62][62];  //存放绘图的内容
    //初始化坐标图  
   pic_init(pic);
    
  int t, count = 1;
    while (cin &gt;&gt; t)
 {
        string s;
       for (int i = 0; i &lt; t; i++)
      {
            cin &gt;&gt; s;
         for (int j = 30; j &gt;= 0; j--)
            {
                int res = ditcul(s, j - 30);
             if (res &lt;= 30 &amp;&amp; res &gt;= -30)
               {
                    if (pic[31 - res][j] != &#39; &#39;)
                 {
                        pic[31 - res][j] = &#39;.&#39;;
                   }
                    else
                 {
                        pic[31 - res][j] = &#39;a&#39; + i;
                   }
                }
                else
                 break;
           }
            for (int j = 30; j &lt;= 60; j++)
           {
                int res = ditcul(s, j - 30);
             if (res &lt;= 30 &amp;&amp; res &gt;= -30)
               {
                    if (pic[31 - res][j] != &#39; &#39;)
                 {
                        pic[31 - res][j] = &#39;.&#39;;
                   }
                    else
                 {
                        pic[31 - res][j] = &#39;a&#39; + i;
                   }
                }
                else
                 break;
           }
        }
        
      cout &lt;&lt; &quot;Case:&quot; &lt;&lt; count++ &lt;&lt; endl;
     pic_print(pic);
       pic_init(pic);
    }
    
  return 0;
}
```

输出格式太折磨人，溜了溜了。。\